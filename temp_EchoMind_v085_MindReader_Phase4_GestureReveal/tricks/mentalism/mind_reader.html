
<!DOCTYPE html>
<html>
<head><title>EchoMind Mind Reader</title></head>
<body>
<div class="card-container" id="cardDisplay"></div>
<script>
// JS would go here in full version
</script>

<script>
let startX = 0, startY = 0, endX = 0, endY = 0, zPoints = [];

function detectZPattern(points) {
  if (points.length < 3) return false;
  const [p1, p2, p3] = points.slice(-3);
  const d1 = Math.sign(p2.x - p1.x);
  const d2 = Math.sign(p3.x - p2.x);
  return d1 !== d2 && Math.abs(p1.y - p3.y) < 50;
}

document.addEventListener("touchstart", e => {
  startX = e.touches[0].clientX;
  startY = e.touches[0].clientY;
  zPoints = [{ x: startX, y: startY }];
});

document.addEventListener("touchmove", e => {
  const x = e.touches[0].clientX;
  const y = e.touches[0].clientY;
  zPoints.push({ x, y });
});

document.addEventListener("touchend", e => {
  endX = e.changedTouches[0].clientX;
  endY = e.changedTouches[0].clientY;

  const dx = endX - startX;
  const dy = endY - startY;

  if (Math.abs(dy) > 100 && Math.abs(dx) < 100 && dy < 0) {
    triggerReveal("swipe");
  } else if (detectZPattern(zPoints)) {
    triggerReveal("z-pattern");
  }
});

function triggerReveal(source) {
  const revealed = localStorage.getItem("lastCard");
  if (revealed) {
    document.querySelectorAll(".card-container img").forEach(img => img.classList.remove("active"));
    const card = document.getElementById(revealed);
    if (card) card.classList.add("active");
  } else {
    alert("No prediction yet.");
  }
}
</script>

</body>
</html>
