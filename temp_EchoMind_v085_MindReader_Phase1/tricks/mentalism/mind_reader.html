<html><head><title>Mind Reader</title></head><body>
<div id="liveThought" style="position: absolute; top: 50%; left: 50%;
  transform: translate(-50%, -50%); font-size: 28px; color: white;
  text-align: center; z-index: 5; font-weight: bold;">
</div>


<script>
let recognition;
window.addEventListener("load", () => {
  if ('webkitSpeechRecognition' in window) {
    recognition = new webkitSpeechRecognition();
    recognition.lang = "en-US";
    recognition.continuous = true;
    recognition.interimResults = true;
    recognition.onresult = (event) => {
      let live = "";
      for (let i = event.resultIndex; i < event.results.length; ++i) {
        if (event.results[i].isFinal) {
          live += event.results[i][0].transcript + " ";
        }
      }
      document.getElementById("liveThought").innerText = live.trim();
      localStorage.setItem("lastVoice", live.trim());
    };
    recognition.onerror = (event) => {
      console.warn("Mic error:", event.error);
    };
    recognition.start();
  }
});

window.addEventListener("beforeunload", () => {
  if (recognition && recognition.stop) recognition.stop();
});
</script>

</body></html>